# Инструкция по интеграции продукта "Спонсорские размещения"

## Общие сведения

Продукт "Спонсорское размещение" предназначен для показа товарных промо-материалов от производителей товаров \(рекламодателей\) на страницах интернет-магазина и сбора метрик взаимодействия посетителей с показанным контентом.

Для того чтобы эфективность показов контента была выше, система позволяет магазинам задавать контекст рекламного блока в зависимости от типа страницы, а рекламодателям дается возможность ограничивать показы контента в зависимости от данных, доступных на каждом типе страниц.

#### Типы страниц

* Страница товарной карточки;
* Страница группы товаров \(корзина, успешного завершения заказа\);
* Страница товарной категории;
* Страница поисковой выдачи;
* Прочие страницы \(главная, 404 и т.д.\).

Так на странице товарной карточки имеется возможно запросить контент, показ которого рекламодатель ограничил по товарным параметрам \(цене товара, категории и т.д.\); на поисковой странце -- по семантическому ядру; на странице товарной категории -- по товарной категории, которую просматривает пользователь. На всех страницах рекламодатель может ограничить показы в зависимости от профили посетителя.

Система позволяет магазину в рамках одного места на странице запрашивать различный контент для показа.

#### Тип контента:

* Товарная полка;
* Банер;
* Строка;
* в дальнейшем планируется расширят варианты контента.

Если в рамках одного размещения доступно более одного типа контента, рекламодатель может выбрать тот тип, который посчитает более подходящим для кампании.

## Этапы подключения системы к интернет магазину

### Составление карты интеграции

Необходимо составить список страниц/экранов с местами, где планируется показывать спонсорский контент. Для каждого места получить идентификатор, выбрать тип страницы и тип контента. 

Должна получится таблица \(карта интеграции\):

| Место размещения | Идентификатор блока | Тип страницы | Тип контента |
| :--- | :--- | :--- | :--- |
| Карточка товара до комментариев | 608d286f30e9b69fee2be370 | Товарная карточка | Товарная полка |
| Карточка товара после комментариев | 608d28c10f3b6f6091ae818c | Товарная карточка | Товарная полка, банер |
| Поисковая страница | 608d2887b50326449cb41224 | Поисковая выдача | Банер |
| Главная страница, баннерное место | 608d28f9b0a04d23b9aea5e5 | Прочая | Банер |

Карту интеграции составляет сотрудник Retail Rocket при участии сотрудников интернет магазина

### Интеграция систем

Интеграция состоит из двух этапов: интеграция спонсорских блоков, передача пользовательского поведения.

#### Интеграция спонсорских блоков

Имея на руках карту интеграции, программист интернет-магазина, используя документацию [API для получения спонсорских размещений](api-sponsorskikh-razmeshenii.md), запрашивает контент при каждом показе страницы, в зависимости от полученого [типа контента](instrukciya-po-integracii-retail-rocket-sponsorskoe-razmeshenie.md#tip-kontenta) обрабатывает ответ и встраивает в интерфейс интернет-магазина промо-материал.

#### Передача пользовательского поведения

Для системы "Retail Rocket Спонсорское размещение" пользовательское поведение необходимо в двух аспектах: учет взаимодествия пользователей со спонсорским контентом -- расчет эфективности показов, и получение пользовательсх событий для предоставления рекламодателем функционала таргетирования контента на основе профиля пользователя -- таргетирование по интересам пользователя к категориями.

**Передача взаимодействия посетителя интернет-магазина с контентом**

Просмотр промо-контента

В случае успешного показа контента пользователю необходимо вызвать метод трекинга "[Просмотр спонсорского контента](http-tracking-api.md#prosmotr-sponsorskogo-kontenta)"  и в качестве значения параметра "Идентификатор спонсорсокого контента" передать значение `impressionContentId`, полученное вместе с промо-контентом от Retail Rocket.

Клик в промо-контент

Если посетитель интернет-магазина кликнул в промо-контент, необходимо вызвать метод трекинга "[Клик по спонсорскому контенту](http-tracking-api.md#klik-po-sponsorskomu-kontentu)"  и в качестве значения параметра "Идентификатор спонсорсокого контента" передать значение `impressionContentId`, полученное вместе с промо-контентом от Retail Rocket.





