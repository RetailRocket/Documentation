# Инструкция по интеграции "Retail Rocket Спонсорское размещение"

## Общие сведения

Продукт "Спонсорское размещение" предназначен для показа товарных промо материалов от производителей товаров\(рекламодателей\) на страницах интернет магазина и собора метрик взаимодействия посетителей с показанным контентом.

Для того чтобы эфективность показов контента была выше, система позволяет магазинам задавать контекст рекламного блока в зависимости от типа страницы, а рекламодателем дается возможность ограничивать показы контента в зависимости от данных доступных на каждом типе страниц.

#### Типы страниц

* Страница товарной карточки;
* Страница группы товаров\(корзина\);
* Страница товарной категории;
* Страница поиска;
* Прочие страницы\(главная, 404 и т.д.\).

Так на странице товарной карточки имеется возможно запросить контент показ которого рекламодателем ограничен по товарным параметрам\(по цене товара, категории и т.д.\); на поисковой странце -- в зависимости от поискового запроса посетител; на странице товарной категории -- по товарной категории которую просматривает пользователь. На всех страницах рекламодатель может ограничить показы в зависимости от профили посетителя.

Система позволяет магазину в рамках одного места на странице запрашивать различный контент для показа: 

#### Виды контента

* Товарная полка;
* Банер;
* Строка;
* в дальнейшем планируется расширят варианты контента.



## Этапы интеграции

### Составление карты интеграции

Необходимо составить список страниц/экраной с местами где планируется показывать спонсорский контент. Для каждого места получить идентификатор и тип блока. 

Должна получится таблица\(карта интеграции\):

| Место размещения | Идентификатор блока | Тип размещения |
| :--- | :--- | :--- |
| Карточка товара до коментариев | 608d286f30e9b69fee2be370 | Спонсорский контент для товарных страниц/экранов |
| Карточка товара после коментариев | 608d28c10f3b6f6091ae818c | Спонсорский контент для товарных страниц/экранов |
| Поисковая страница | 608d2887b50326449cb41224 | Спонсорский контент для страницы/экрана поиска2 |
| Главная страница банерное место | 608d28f9b0a04d23b9aea5e5 | Спонсорский контент для прочих страниц/экранов |

Карту интеграции составляет сотрдуник Retail Rocket при участие сотрудников интернет магазина

### Интеграция

Интеграция состоит из двух этапов: интеграция спонсорских блоков, передача пользовательского поведения.

#### Интеграция спонсорских блоков

Имея на руках карту интеграции, программист интернет магазина, используя документацию [API для получения спонсорских размещений](api-sponsorskikh-razmeshenii.md), запрашивает контент для каждого показа страницы/экрана и в зависимость от полученого [типа контента ](instrukciya-po-integracii-retail-rocket-sponsorskoe-razmeshenie.md#vidy-kontenta)обрабатывает и встраивает его в интерфейс сайта/мобильного приложения.

#### Передача пользовательского поведения

Для системы "Retail Rocket Спонсорское размещение" пользовательское поведение необходимо в двух аспетах: учет взаимодествия пользователей с спонсорским контентом -- расчет эфективности показов, и получение пользовательсх событий для предоставления рекламодателем функционала таргетирования контента на основе пользовательского поведения -- таргетирвоание по интересам пользователя к категориями.

**Для учета системой взаимодействия пользователя с контентом необходимо передать в Retail Rocket событие просмотра контента и клика в контент.**

Просмотр контента

Система Retail Rocket вместе с типом контента и самим контентом передает специальный идентификатор `impressionContentId.` В случае успешного показа контента пользователю необходимо вызвать метод трекинга "[Просмотр спонсорского контента](integraciya-s-retail-rocket/http-tracking-api.md#prosmotr-sponsorskogo-kontenta)"  и в качестве значения параметра "Идентификатор спонсорсокого контента" передать значение `impressionContentId`.

API трекинда пользовательского поведения предоставляет метод "[Просмотр спонсорского контента](integraciya-s-retail-rocket/http-tracking-api.md#prosmotr-sponsorskogo-kontenta)" которые принимает в качесве параметра `impressionContentId`

Вместе с контентом приходит специальный идентификатор `contentId`





